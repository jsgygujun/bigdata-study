# HDFS

## 一、HDFS概述

### 1.1 HDFS产生背景

随着数据量越来越大，在一台机器上的磁盘装不下了，那么就分配到更多机器的磁盘中，但是不方便管理和维护，迫切需要一种系统来管理多台机器上的文件， 这就是分布式文件管理系统。HDFS 只是分布式文件管理系统中的一种。

### 1.2 HDFS概念

首先，HDFS是一个文件系统，用来存储文件，通过目录树来定位文件；其次，HDFS是分布式的，由多个服务器联合起来实现其功能，集群中的服务器有各自的角色。

1. NameNode(nn)： 存储文件的元数据，如文件名、目录结构、文件属性（生成时间、副本数、权限等）等，以及每个文件的块列表和块所在的DataNode等。
2. DataNode(dn)：在本地文件系统存储文件块数据，以及块数据的校验和。
3. Secondary NameNode(2nn)：用来监控HDFS状态的辅助后台程序，每隔一段时间获取HDFS元数据快照。

### 1.3 HDFS优缺点

#### 1.3.1 优点

1. 高容错性
   1. 数据自动保存多个副本。它通过增加副本的形式，提高容错性。
   2. 某一个副本丢失以后，它可以自动恢复。
2. 适合大数据处理
   1. 数据规模： 能够处理数据规模达到GB、TB、甚至PB级别的数据。
   2. 文件规模： 能够百万规模以上的文件数量，数量相当之大。
3. 流式数据访问
   1. 一次写入，多次读取，不能修改，只能追加。
   2. 它能保证数据的一致性。
4. 构建在廉价的机器上，通过多副本机制，提高可靠性。

#### 1.3.2 缺点

1. 不适合低延迟数据访问，比如毫秒级别的存取数据，是做不到的。
2. 无法高效的对大量小文件进行存储
   1. 存储大量小文件的话，会占用NameNode大量的内存来存储文件、目录和块信息，这样是不可取的，因为NameNode的内存总是有限的。
   2. 小文件存储的寻址时间会超过读时间，它违反了HDFS的设计目标。
3. 并发写入、文件随机修改
   1. 一个文件只能有一个写，不允许多个线程同时写。
   2. 仅支持文件追加，不支持文件的随机修改。



